# Dockerfile.dev
FROM node:20-bookworm-slim

WORKDIR /app

# Copia apenas os manifests primeiro (aproveita cache)
COPY package.json package-lock.json ./

RUN npm ci || (rm -f package-lock.json && npm install --no-audit --no-fund)

# Copia o restante do código
COPY . .

# Expõe a porta do Vite
EXPOSE 5173

# Executa o Vite no modo dev, com host 0.0.0.0 para funcionar no container
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
